{% extends 'base.html' %}
{% block content %}
    <div class="flex justify-between gap-x-12">
        <div class="w-2/3" style="flex-grow:1">
            <form action="" method="POST">
                {% csrf_token %}
                <h2 class="text-4xl pb-5">Shipping details</h2>
                {% if default_shipping_address %}
                    <div>
                        {{ default_shipping_address.first_name }} {{ default_shipping_address.last_name }}
                        <br>
                        {{ default_shipping_address.address }}
                        <br>
                        {{ default_shipping_address.postcode }} {{ default_shipping_address.city }}
                    </div>
                    <div>(default address)</div>
                    <button type="submit" class="button my-3" name="action" value="use_default_shipping_address">
                        Place order
                    </button>
                {% elif last_used_shipping_address %}
                    <div>
                        {{ last_used_shipping_address.first_name }} {{ last_used_shipping_address.last_name }}
                        <br>
                        {{ last_used_shipping_address.address }}
                        <br>
                        {{ last_used_shipping_address.postcode }} {{ last_used_shipping_address.city }}
                    </div>
                    <div>(last used address)</div>
                    <button type="submit" class="button my-3" name="action" value="use_last_used_shipping_address">
                        Place order
                    </button>
                {% else %}
                    <div>
                        {{ shipping_form.first_name.label_tag }}
                        {{ shipping_form.first_name }}
                        {{ shipping_form.last_name.label_tag }}
                        {{ shipping_form.last_name }}
                        {{ shipping_form.address.label_tag }}
                        {{ shipping_form.address }}
                        {{ shipping_form.postcode.label_tag }}
                        {{ shipping_form.postcode }}
                        {{ shipping_form.city.label_tag }}
                        {{ shipping_form.city }}
                        <div class="flex flex-row justify-start items-center gap-1">
                            {{ shipping_form.is_default }}
                            {{ shipping_form.is_default.help_text }}
                        </div>
                    </div>
                    <button type="submit" class="button my-3" name="action" value="create_new_shipping_address">
                        Place order
                    </button>
                {% endif %}
            </form>
        </div>
        <div class="w-1/3 pl-3">
            <h2 class="text-4xl pb-5">Cart summary</h2>
            {% for item in cart_items %}
                <div>
                    {{ item.quantity }}x {{ item }}
                </div>
            {% endfor %}
            <p class="pt-5">Total price: {{ total_price }} â‚¬</p>
        </div>
    </div>
{% endblock %}
